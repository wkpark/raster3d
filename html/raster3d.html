<html>
<head>
<title> Raster3D package for photorealistic molecular graphics </title>
   <LINK REL=stylesheet HREF="r3d_docstyle.css" TEXT="text/css">
</head>
<body>
<img src="r3d_icon.gif" alt="" align=left vspace=10>
<br>
<h1 align=center>Raster3D V2.5d</h1>
<br clear=all>

The Raster3D molecular graphics package consists of a core program 
<a href="render.html">render</a> 
and a number of ancillary programs
which read atomic coordinates from Brookhaven PDB files to produce
scene descriptions for input to render. 
Raster3D can also render images composed using other programs such as 
<a href="#refs">Molscript</a> and 
<a href="http://www.scripps.edu/pub/dem-web/index.html">XtalView</a>.
<p>

<div class="box">
<table noborder>

<tr valign=top>
<td>
    <b>Index</b>
    <ul>
    <li><a href="http://www.bmsc.washington.edu/raster3d/r3d_FAQ.html">FAQ
	(Frequently Asked Questions)</a>
    <li><a href="#general">Synopsis</a>
    <li><a href="#examples">Brief examples of use</a>
    <li><a href="#source">Distribution site</a>
    </ul>
</td>
<td>
    <b>&nbsp;</b>
    <ul>
    <li><a href="#related">Related programs</a>
    <li><a href="#authors">Authors</a>
    <li><a href="#cite">Citing the program</a>
    <li><a href="#refs">References</a>
    </ul>
</td>
</tr>

<tr><td></td><td></td></tr>

<tr valign=top>
<td>
    <b>Programs in the Raster3D package</b>
	<ul>
	<li><a href="avs2ps.html">avs2ps</a>
	<li><a href="balls.html">balls</a>
	<li><a href="label3d.html">label3d</a>
	<li><a href="normal3d.html">normal3d</a>
	<li><a href="rastep.html">rastep</a>
	<li><a href="render.html">render</a> 
	<li><a href="ribbon.html">ribbon</a>
	<li><a href="rings3d.html">rings3d</a>
	<li><a href="rods.html">rods</a>
	<li><a href="stereo3d.html">stereo3d</a>
	</ul>
</td>
<td>
    <b>Hints for composing pictures</b>
    <ul>
    <li><a href="r3d_animation.html">
	Animation</a>
    <li><a href="r3d_hints.html#black-white">
	Black &amp White figures</a>
    <li><a href="r3d_hints.html#colours">
	Colours</a>, and a
        <a href="r3d_colorpicker.html">
        <font color=#cc0000>C</font><font color=#ff00ff>o</font><font color=#0000cc>l</font><font color=#009900>o</font><font color=#996500>r</font> picking tool</a>
    <li><a href="r3d_hints.html#composing">
	Composing figures in other programs</a>
    <li><a href="r3d_hints.html#matrix">
	Coordinate systems</a>
    <li><a href="r3dtops.html">
    	Labels</a> (special note: 
	<a href="r3d_hints.html#labels">
	Molscript labels</a>)
    <li><a href="r3d_hints.html#modularity">
	Making your picture modular</a>
    <li><a href="r3d_hints.html#shadowing">
	Shadowing</a>
    <li><a href="r3d_hints.html#stereo1">
	Side-by-side figures and stereo pairs</a>
    <li><a href="r3d_hints.html#stereo2">
	Stereo pairs and Molscript</a>
    <li><a href="r3d_hints.html#output device">
	Tailoring your image to the output device</a>
    <li><a href="r3d_transparent.html">
	Transparent surfaces</a>
    <li><a href="r3d_examples.html">
	Worked examples from the Raster3D distribution</a>
    </ul>
</td>
<tr>

</table>
</div>

<h4><a name="general">SYNOPSIS</a></h4>
Raster3D uses a fast Z-buffer algorithm to produce high quality pixel images
featuring one shadowing light source, additional non-shadowing light sources,
specular highlighting, transparency, and Phong shaded surfaces.
Output is in the form of a pixel image with 24 bits of color
information per pixel.<p>
Raster3D does not depend on graphics hardware. Four common image output
formats are supported: AVS, JPEG, TIFF, and SGI libimage.  To actually view or
manipulate the images produced, you must also have installed an image viewing
package (e.g. John Cristy's ImageMagick or the SGI libimage utilities).
The Raster3D rendering program can be integrated with ImageMagick to
expand the flexibility of output formats and interactive use.

Ancillary programs are provided for the generation of object
descriptions based on atomic coordinates stored in Brookhaven PDB format.
Although the rendering program is not specific to molecular graphics, Raster3D
is not intended as a general purpose ray-tracing program. 
Some of the algorithms used have been chosen for speed rather than generality;
that is, they happen to work well for the types of images the program is 
intended for, but may produce odd results if used for very different types of
image.
<p>

Raster3D currently supports rendering six object types: spheres,
triangles, planes, smooth-ended cylinders, round-ended cylinders,
and quadric surfaces.
<p>

Version 2.1 added support for two additional "object types" which are
really modifiers for characteristic properties of existing objects. One
of these allows specification of explicit surface normals at triangle
vertices; the other allows specification of surface reflectance
properties specific to individual objects.
<p>

Version 2.2 added support for transparent objects, including transparent
molecular surfaces.
<p>

Version 2.3 added support for
file indirection, additional anti-aliasing options, internal
light sources, a separate alpha blend (matte) channel in the rendered image, 
and some additional properties for special materials. 
There is a new shell script, <a href="stereo3d.html">stereo3d</a>
to automatically generate a side-by-side stereo pair from a Raster3D input file.
<p>

Version 2.4 added support for
generalized quadric surfaces (ellipsoids, cones, etc) and interpolation
of colors assigned to the vertices of triangles.
Input lines beginning with '#' are treated as comments.
There is a new utility program <a href="rastep.html">rastep</a>
which generates "thermal ellipsoid" representations of atoms based on the
Biso or Uij entries in a PDB file (ANISOU cards). The option of colouring 
based on B values has been added here and elsewhere.
<p>

<b>Version 2.5</b> adds support for Z-clipping, output to a JPEG image
file on stdout, piped output to ImageMagick for automatic conversion to
additional image types, and file indirection of header records.
It also includes upgraded support for handling labels (object types
10,11,12) using PostScript. See 
<a href="r3dtops.html">r3dtops</a> and <a href="label3d.html">label3d</a>
documentation.

<h4>
<a name="examples">EXAMPLES</a></h4>
Using only programs included in the Raster3D distribution one can create and
render space-filling models, ball-and-stick models, ribbon models, and figures
composed of any combination of these. The following set of commands would
produce a composite figure of an Fe-containing metalloprotein with a smoothly
shaded ribbon representation of the protein and spheres drawn for the Fe atoms: 

<listing>
# 
# Draw smooth ribbon with default color scheme 2, 
# save description (with header records) in ribbon.r3d 
# 
cat protein.pdb | ribbon -d2 &gt; ribbon.r3d
# 
# Extract Fe atoms only, and draw as spheres. 
# Color info is taken from colorfile. 
# Save description (with no header records) in irons.r3d 
# 
grep ``FE'' protein.pdb | cat colorfile - | balls -h &gt; irons.r3d 
# 
# combine the two descriptions and render as AVS image file 
# 
cat ribbon.r3d irons.r3d | render &gt; picture.x
</listing>
One can alternatively use Molscript to produce a Raster3D 
input file by using the -r switch. Integrated use of
Molscript/Raster3D/ImageMagick allows one to describe, render, and view 3D
representations of existing Molscript figures. 

<listing>
molscript -r &lt; infile.dat | render | display avs:-
</listing>
A similar example using xv as an image viewer, and assuming that 
TIFF support has been built into the render program:

<listing>
molscript -r &lt; infile.dat | render -tiff image.tif 
xv image.tif
</listing>
The same image rendered as a side-by-side stereo pair:

<listing>
molscript -r &lt; infile.dat > input.r3d; stereo3d input.r3d; xv stereo.tiff

</listing>
The
Raster3D distribution also includes a filter utility which will convert the
24-bit color output stream from render into a dithered black &amp; white
PostScript image:

<listing>
render &lt; description.r3d | avs2ps &gt; picture.ps

</listing>

<h4><a name="source">SOURCE</a></h4>
<dl>
<dt><i>anonymous ftp site:	</i>
<dd>ftp.bmsc.washington.edu /pub/raster3d/
<dt><i>via WWW: </i>
<dd><a href="http://www.bmsc.washington.edu/raster3d/raster3d.html">
http://www.bmsc.washington.edu/raster3d/raster3d.html</a>
<dt><i>contact: 	</i>
<dd>Ethan A Merritt
<br>Dept of Biological Structure
<br>University of Washington,
<br>Seattle WA 98195-7742
<br>merritt@u.washington.edu</dl>

<h4><a name="related">RELATED PROGRAMS </a></h4>

<h5>Required for full installation:</h5>
<dl>
    <dt>TIFF
    <dd>In order to build in support for the direct output of TIFF image files,
	you must separately obtain and install a copy of the TIFF library 
	(libtiff.a).  Several implementations are available, including one by 
	Sam Leffler which may be obtained via anonymous ftp from 
	<a href="ftp://ftp.sgi.com"> sgi.com</a>.
    <dt>JPEG
    <dd>In order to build in support for output of JPEG images you must have a
	copy of the JPEG library. If your system does not already have this
	library installed, you can obtain it directly from the Indepent JPEG Group development 
	project via anonymous ftp from 
	<a href="ftp://ftp.uu.net/graphics/jpeg/">ftp.uu.net/graphics/jpeg/</a>.
    <dt>ImageMagick
    <dd>In order to view the rendered images on a workstation screen you must 
	also obtain and install an image viewer. 
	Two commonly available viewers are John Christy's 
	<a href="http://www.wizards.dupont.com/cristy/ImageMagick.html">
	ImageMagick</a> 
	(also available via anonymous ftp from 
	<a href="ftp://ftp.x.org"> 
	ftp.x.org </a>) 
	and John Bradley's xv.<p>
    <dt>Ghostscript
    <dd>Used only by the label-processing tools 
	<a href="r3dtops.html">r3dtops</a> and <a href="label3d">label3d</a>.
</dl>

<h5>Some other programs with direct Raster3D output modes:</h5>
<dl>
    <dt>Molscript
    <dd>Figures composed in Molscript can be rendered in Raster3D rather than
	being printed as PostScript images.  The features of Raster3D version
	2.0 are supported by Moslcript version 1.4 (with a couple of additional
	patches that come in the Raster3D distribution).  To obtain Molscript
	please contact Per Kraulis directly (Email:
	<a href="mailto:pjk@avatar.se">pjk@avatar.se</a>). There is now a
	Molscript web page at 
	<a href="http://www.avatar.se/molscript">
	http://www.avatar.se/molscript</a>.
    <dt>ORTEX
    <dd>ORTEX V7 (an interactive descendent of Carroll Johnson's ORTEP program) 
	now supports Raster3D as an output mode. ORTEX runs under DOS/Windows, 
	which makes this the only WIndows port of Raster3D that I know of. 
	<a href="http://www.ucg.ie/cryst/software.htm">
	http://www.ucg.ie/cryst/software.htm</a>
    <dt>TkRaster3D
    <dd> an X11-based front-end (GUI) for the Raster3D programs developed by 
	Hillary Gilson at NIST, 
	<a href="http://www.cstl.nist.gov/div831/TkRaster3D/">
	http://www.cstl.nist.gov/div831/TkRaster3D/</a>
    <dt>VMD
    <dd>Biomolecular visualization tool from the Theoretical Biophysics group 
	at the University of Illinois, 
	<a href="http://www.ks.uiuc.edu/Research/vmd/">
	http://www.ks.uiuc.edu/Research/vmd/</a>
    <dt>Xfit/XtalView
    <dd> General crystallographic model building, map fitting, and 
	analysis program by Duncan McRee, available in both academic and 
	commercial versions, 
	<a href="http://www.scripps.edu/pub/dem-web/index.html">
	http://www.scripps.edu/pub/dem-web/index.html</a>
</dl>

The avs2ps utility for direct production of black &amp; white PostScript images
is now included in the Raster3D distribution. It replaces earlier
machine-dependent programs in the viewtools kit.<p>

Several auxiliary programs are available from the ftp site above which may be
useful, though they have not been kept up to date with the current Raster3D
version. These include two attempts to aid in the composition of Raster3D
images (atoms, preras3d) and tools for conversion to half-toned monochrome
images and annotation and display of the images (viewtools). Most of the code
was written specifically for SGI workstations, and may not transport well to
other platforms.<p>

<h4>
<a name="authors">AUTHORS </a></h4>
Originally written by David J. Bacon and Wayne F. Anderson. Ancillary programs
by Mark Israel, Stephen Samuel, Michael Murphy, Albert Berghuis, and Ethan A
Merritt. Extensions, revisions, and modifications by Ethan A Merritt.

<h4><a name="cite">CITING THE PROGRAM</a></h4>
If you use the package to prepare figures for publication, 
<i>please</i> give proper credit to the authors; the proper citation for the
most recent version of the package is Merritt &amp; Bacon (1997) as given below.

<h4><a name="refs">REFERENCES</a></h4>
Bacon, D.J., &amp; Anderson, W.F. (1988) ``A Fast Algorithm for Rendering
Space-Filling Molecule Pictures''. (abstract of paper presented at the Seventh
Annual Meeting of the Molecular Graphics Society). J. Molec. Graphics 6,
219-220. <p>
Kraulis, P.J. (1991) ``MOLSCRIPT: a program to produce both detailed and
schematic plots of protein structures''. J. Appl. Cryst. 24, 946-950.<p>
Merritt, E.A. &amp; Murphy, M.E.P. (1994) ``Raster3D Version 2.0 - A Program
for Photorealistic Molecular Graphics''. Acta Cryst. D50, 869-873.<p>
Merritt, E.A. &amp; Bacon, D.J. (1997) ``Raster3D 
Photorealistic Molecular Graphics''. Methods in Enzymology 277, 505-524.<p>

<hr>
<a href="raster3d.html">
<img src="index_button.gif" align=top> Back to top </a>
<a href="http://www.bmsc.washington.edu/raster3d/raster3d.html">
<img src="r3d_icon.gif" alt="" align=top> Raster3D homepage </a>

</body></html>
