<html>
<head>
<title> label3d - Raster3D package </title>
   <LINK REL=stylesheet HREF="r3d_docstyle.css" TEXT="text/css">
</head>
<body>

<h1 align=center>
LABEL3D
</h1>
<h4>
SYNOPSIS</h4>
<b>label3d</b> is a shell script that processes a
<a href="raster3d.html"> Raster3D </a> 
input file containing label descriptors (object types 10, 11, 12)
into a TIFF image  <i>label3d.tiff</i> containing both the
molecular graphics image and the associated labels.
<p>
<b>label3d</b> can accept input either from a file or from <i>stdin</i>.

<pre>
label3d render_input_file.r3d; display label3d.tiff
</pre>
or
<pre>
cat list-of-files | label3d -
</pre>

<p>
Unfortunately, the Raster3D render program cannot process labels.
To overcome this lack, earlier Raster3D distributions included an 
auxilliary program <a href="r3dtops.html">r3dtops</a> that
complements render in that it can process the labels but not the
graphics objects. The r3dtops code is now part of the render 
program itself, and is invoked if the <i>-labels</i> command line
switch is present. In this case the labels are converted to PostScript
commands and placed in a file <i>label3d.ps</i>. 
The <b>label3d</b> script automates the process of rendering the image,
running the resulting PostScript file through ghostscript, and then 
recombining the two component images into a single TIFF image containing 
both the molecular graphics objects and the associated labels.
<p>


Several intermediate files are produced by label3d:
<ul>
<li>label3d.tmp - temporary copy of the input file
<li>label3d.ps  - PostScript description of the labels, created by render
<li>label3d.ppm - PBM+ format raster image produced by ghostscript (labels but no graphics objects)
<li>render.tiff - TIFF image produced by render (graphics objects but no labels)
<li>label3d.tiff - TIFF output image combining the graphics objects and the labels.
</ul>

<img src="r3d_example7.jpeg" align=right alt="">
<h4>EXAMPLE</h4>
Example 7 (figure at right) in the Raster3D distribution illustrates the use of the
<b>label3d</b> script.
The example script actually produces a 
<a href="r3d_stereo7.jpeg">stereo pair</a> that shows labels
positioned in three dimensions.
<p>

<h4>ENVIRONMENT</h4>
This script requires TIFF support in render, the unix utility sed, the
<a href="http://www.wizards.dupont.com/cristy/ImageMagick.html">
ImageMagick</a> image processing package, and 
ghostscript. 
The intermediate files listed above are created each time the script is run. 
Any exiting files by these names will be destroyed.

<h4>BUGS</h4>
<ul>
<li>
The whole nature of label handling in Raster3D is not yet settled.
It would be much nicer if all the label processing were taken
care of by the render program itself.<p>
<li>
The script assumes that the image is being prepared for printing
at 300 dpi (r3dtops is called with <i>-fontscale 3.0</i>).<p>
<li>
Labels always appear on top of the molecular graphics image,
even labels which should be occluded by a foreground object.<p>
</ul>

<h4>AUTHORS</h4>
Ethan A Merritt.

<hr>
<a href="raster3d.html">
<img src="index_button.gif" align=top> Back to top </a>
<a href="http://www.bmsc.washington.edu/raster3d/raster3d.html">
<img src="r3d_icon.gif" alt="" align=top> Raster3D homepage </a>

</body>
</html>
