<html>
<head>
<title> r3dtops - Raster3D to PostScript label conversion</title>
   <LINK REL=stylesheet HREF="r3d_docstyle.css" TEXT="text/css">
</head>
<body>

<h1 align=center>
Raster3D to PostScript label conversion
</h1>

<h4>
SYNOPSIS</h4>

The conversion of Raster3D label records 
<a href="render.html#obj10">(object types 10, 11, 12)</a>, 
into PostScript is performed by the
<a href="render.html">render</a> program under control of the
<i>-labels</i> command line option.
In this case
render produces two output files: one containing the rendered
image and another containing the PostScript label descriptions.
In earlier versions of Raster3D this function was performed by a 
separate program r3dtops, which is now obsolete.
The PostScript file can be converted into a raster image by
ghostscript and then re-combined with the molecular graphics
image to yield a final composite image with both rendered
objects and labels.
This sequence of operations can be done manually, but
is generally done automatically by the 
<a href="label3d.html">label3d</a> script.

<h4>OPTIONS (to the render program)</h4>
<dl>
<dt><i>-fontscale</i>
    <dd>It is problematic to interpret the font sizes requested
    	in the font descriptor records so that they produce the
	desired size on the eventual output device or printer.
	By default the r3dtops program assumes that the eventual
	output device is approximately 100 dpi. The <i>-fontscale</i>
	option allows you to scale this up or down as necessary.
	The default scaling is multiplied by the parameter <i>xx</i>.
<dt><i>-labels [filename]</i>
    <dd>Process labels (object types 10,11,12) and create a PostScript output file
    	in addition to the rendered image.
	If no filename is given, the output file is named label3d.ps.
</dl>

<h4>SPECIAL CHARACTERS</h4>
A small number of escaped characters are allowed in the label text string. 
These may be useful for tweaking the position of your labels:
<pre>
	\n	new line
	\b	backspace
	\v	vertical tab (move up 1/2 line)
	\A	Angstrom symbol
</pre>

<h4>T<sub>E</sub>X-LIKE SYNTAX</h4>
Certain conventions from the text-setting program T<sub>E</sub>X are supported by
the Raster3D label processing code.
In particular the character `_' introduces a subscript, while the
character `^' introduces a superscript.
If more than one character is to be sub- or super-scripted, 
the entire string can be enclosed in curly brackets.
Greek characters and other symbols can be referred to by name 
if they are prefixed with a backslash.

<h4>EXAMPLE</h4>

<img src="r3d_example7.jpeg" align=right>
Example 7 in the Raster3D distribution /examples subdirectory illustrates
the PostScript label processing (see figure at right). Here are the commands
that produced the title:
<pre>
# Use absolute picture coordinates
15
# First character is big, and uses a fancy font
10
"ZapfChancery-MediumItalic" 20. "Left-align"
#
11
-0.45 0.40 0.0     1.0 1.0 1.0
R
# The remaining characters are smaller, but follow on the same line
10
"Palatino-BoldItalic" 12. "Offset"
11
0.0 0.0 0.0        1.0 1.0 1.0
aster3D now does labels!
#
</pre>

Here are some examples of T<sub>E</sub>X-like label syntax:
<center>
<table border=1 width=75% cellpadding=5>
<tr align=left><th>label text</th><th>appears in final image as</th></tr>
<tr><td>N^{\epsilon2}-O^{\delta1} = 2.7Å</td>
    <td><img src="r3dtops_tex1.gif"></td></tr>
<tr><td>3\sigma [F_o - F_c]</td>
    <td><img src="r3dtops_tex2.gif"></td></tr>
<tr><td>data \infty - 2.0\A</td>
    <td><img src="r3dtops_tex3.gif"></td></tr>
</table>
</center>
<p>
Note that the Angstrom symbol may either be entered directly as
'&Aring;' [character 197 (octal 305)] or as the escape sequence '\A'.


<h4>BUGS</h4>
<p>
If a label contains T<sub>E</sub>X-like escape sequences it is always processed
as "Left-align", since the program doesn't know enough about the
eventual string width to center it properly.<p>
<p>
Labels always appear on top of the molecular graphics image,
even labels which should be occluded by a foreground object.<p>

<h4>AUTHORS</h4>
Ethan A Merritt.

<hr>
<a href="raster3d.html">
<img src="index_button.gif" align=top> Back to top </a>
<a href="http://www.bmsc.washington.edu/raster3d/raster3d.html">
<img src="r3d_icon.gif" alt="" align=top> Raster3D homepage </a>

</body>
</html>
